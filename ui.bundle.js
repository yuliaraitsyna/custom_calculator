(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r,u){return r=o(r),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,n()?Reflect.construct(r,u||[],o(t).constructor):r.apply(t,u))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n=function(){return!!e})()}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function s(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function p(e,t){return e.get(v(e,t))}function f(e,t,n){return e.set(v(e,t),n),n}function v(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var h=function(e){return e<Number.MAX_SAFE_INTEGER&&e>Number.MIN_SAFE_INTEGER},y=1e12,m=new WeakMap,b=new WeakMap,w=new WeakMap,d=new WeakMap,x=new WeakMap,k=function(){return c((function e(){i(this,e),s(this,m,void 0),s(this,b,void 0),s(this,w,void 0),s(this,d,void 0),s(this,x,void 0),f(m,this,0),f(b,this,0),f(d,this,[]),f(w,this,[]),f(x,this,null)}),[{key:"saveState",value:function(){p(w,this).push({previousValue:p(m,this),currentValue:p(b,this),operation:p(x,this)})}},{key:"executeOperation",value:function(e){this.saveState(),f(m,this,e.execute(this)),f(b,this,0)}},{key:"undoOperation",value:function(){if(0!==p(w,this).length){var e=p(w,this).pop(),t=e.previousValue,n=e.currentValue,o=e.operation;f(m,this,t),f(b,this,n),f(x,this,o)}}},{key:"currentValue",get:function(){return p(b,this)},set:function(e){try{if(!h(e))throw new Error("value is out of bounds");f(b,this,e)}catch(e){console.error(e)}}},{key:"previousValue",get:function(){return p(m,this)},set:function(e){try{if(!h(e))throw new Error("value is out of bounds");f(m,this,e)}catch(e){console.error(e)}}},{key:"operation",get:function(){return p(x,this)},set:function(e){f(x,this,e)}},{key:"history",get:function(){return p(d,this)},set:function(e){f(d,this,e)}},{key:"clearCalculator",value:function(){f(b,this,0),f(m,this,0),f(x,this,null),f(w,this,[])}}])}(),E=function(){return c((function e(){i(this,e)}),[{key:"execute",value:function(){throw new Error("method 'execute()' must be implemented.")}}])}(),V=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=e.currentValue,o=(t*y+n*y)/y;if(!h(o))throw new Error("value is out of bounds");return o}}])}(E),g=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=e.currentValue,o=(t*y-n*y)/y;if(!h(o))throw new Error("value is out of bounds");return o}}])}(E),O=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue*e.currentValue;if(!h(t))throw new Error("value is out of bounds");return t}}])}(E),C=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=e.currentValue;if(0===n)throw new Error("division by 0");var o=t/n;if(!h(o))throw new Error("value is out of bounds");return o}}])}(E),M=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=Math.pow(t,2);if(!h(n))throw new Error("value is out of bounds");return n}}])}(E),R=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=Math.pow(t,3);if(!h(n))throw new Error("value is out of bounds");return n}}])}(E),N=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=e.currentValue;if(n<1&&n>0&&t<0)throw new Error("impossible to take even root of negative number");var o=Math.pow(t,n);if(!h(o))throw new Error("value is out of bounds");return o}}])}(E),j=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=Math.pow(10,t);if(!h(n))throw new Error("value is out of bounds");return n}}])}(E),S=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue;if(t<0)throw new Error("square root of a negative number");if(!h(t))throw new Error("value is out of bounds");return Math.pow(t,.5)}}])}(E),P=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue;if(!h(t))throw new Error("value is out of bounds");return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}}])}(E),_=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue,n=e.currentValue;if(0===n)throw new Error("can't take the 0th root");if(t<0&&n%2==0)throw new Error("can't take an even root of a negative number");if(t<0&&n<0)throw new Error("can't take a negative root of a negative number");return t<0?-Math.pow(-t,1/n):Math.pow(t,1/n)}}])}(E),q=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue/100;if(!h(t))throw new Error("value is out of bounds");return t}}])}(E),A=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){return-e.previousValue}}])}(E),T=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue;if(0===t)throw new Error("can't divide by 0");return 1/t}}])}(E),W=new WeakMap,I=function(e){function n(){var e;i(this,n);for(var o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return s(e=t(this,n,[].concat(r)),W,(function(t){return 0===t||1===t?1:t*p(W,e).call(e,t-1)})),e}return r(n,e),c(n,[{key:"execute",value:function(e){var t=e.previousValue;if(t-parseInt(t)!=0)throw new Error("value is not an integer");if(t<0)throw new Error("factorial of a negative number is undefined");var n=p(W,this).call(this,t);if(!h(n))throw new Error("value is out of bounds");return n}}])}(E),F=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(){return+(new Date).getTime()%y/y}}])}(E),G=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){return e.clearCalculator(),0}}])}(E),B=function(){return c((function e(){if(i(this,e),(this instanceof e?this.constructor:void 0)===e)throw new TypeError("cannot construct MemoryOperation instances directly")}),[{key:"execute",value:function(){throw new Error("method 'execute()' must be implemented.")}}])}(),D=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){e.history.length=0}}])}(B),L=function(e){function n(){return i(this,n),t(this,n,arguments)}return r(n,e),c(n,[{key:"execute",value:function(e){if(e.history.length>=Array.MAX_SAFE_INTEGER)throw new Error("memory is overflown");e.history.push(e.previousValue)}}])}(B),U=function(){return c((function e(){i(this,e)}),[{key:"execute",value:function(e){if(0===e.history.length)throw new Error("memory is empty");e.history.length--}}])}(),X=function(){return c((function e(){i(this,e)}),[{key:"execute",value:function(e){if(0===e.history.length)throw new Error("memory is empty");return e.history[e.history.length-1]}}])}(),z=document.createElement("div");z.className="calculator-container";var H=document.createElement("div");H.className="calculator-display";var J=document.createElement("button");J.textContent="Undo",J.id="undo-btn",document.body.appendChild(J),document.body.appendChild(z),z.appendChild(H);var K=document.createElement("div");K.className="basic-calculator-container";var Q=document.createElement("div");Q.className="complex-operations-container",z.appendChild(Q),z.appendChild(K);var Y=new k,Z=0,$=!1;H.textContent=Z,J.addEventListener("click",(function(){Y.undoOperation(),H.textContent=Y.previousValue,Z=Y.previousValue}));var ee=function(e){if(Z&&(Y.currentValue=parseFloat(Z)),!function(e,t){try{switch(["equal","clear"].includes(e)||(t.previousValue=t.currentValue),e){case"add":t.operation=new V;break;case"subtract":t.operation=new g;break;case"multiply":t.operation=new O;break;case"divide":t.operation=new C;break;case"percent":t.executeOperation(new q);break;case"negate":t.executeOperation(new A);break;case"square":t.executeOperation(new M);break;case"cube":t.executeOperation(new R);break;case"squareRoot":t.executeOperation(new S);break;case"cubeRoot":t.executeOperation(new P);break;case"power":t.operation=new N;break;case"tenPower":t.executeOperation(new j);break;case"nthRoot":t.operation=new _;break;case"reciprocal":t.executeOperation(new T);break;case"factorial":t.executeOperation(new I);break;case"random":t.executeOperation(new F);break;case"memoryClear":t.executeOperation(new D);break;case"memoryAdd":t.executeOperation(new L);break;case"memorySubtract":t.executeOperation(new U);break;case"memoryRecall":t.executeOperation(new X);break;case"equal":if(!t.operation)return void console.error("No operation set!");t.executeOperation(t.operation),t.operation=null;break;case"clear":t.executeOperation(new G);break;default:console.error("Unknown operation:",e)}return 1}catch(e){return console.error("Error handling operation:",e),0}}(e,Y))return H.textContent="Error",Z=0,$=!1,void Y.clearCalculator();["memoryAdd","clear"].includes(e)?H.textContent=0:["equal","percent","negate","square","cube","squareRoot","cubeRoot","tenPower","reciprocal","factorial","random","memoryRecall"].includes(e)&&(H.textContent=Y.previousValue,Y.currentValue=Y.previousValue,Y.previousValue=0),Z=0,$=!1};[{icon:"(",value:"(",operation:null,type:"complex"},{icon:")",value:")",operation:null,type:"complex"},{icon:"mc",value:null,operation:"memoryClear",type:"complex"},{icon:"m+",value:null,operation:"memoryAdd",type:"complex"},{icon:"m-",value:null,operation:"memorySubtract",type:"complex"},{icon:"mr",value:null,operation:"memoryRecall",type:"complex"},{icon:"2nd",value:null,operation:null,type:"complex"},{icon:"x²",value:null,operation:"square",type:"complex"},{icon:"x³",value:null,operation:"cube",type:"complex"},{icon:"xʸ",value:null,operation:"power",type:"complex"},{icon:"eˣ",value:null,operation:null,type:"complex"},{icon:"10ˣ",value:null,operation:"tenPower",type:"complex"},{icon:"1/x",value:null,operation:"reciprocal",type:"complex"},{icon:"²√x",value:null,operation:"squareRoot",type:"complex"},{icon:"³√x",value:null,operation:"cubeRoot",type:"complex"},{icon:"ʸ√x",value:null,operation:"nthRoot",type:"complex"},{icon:"ln",value:null,operation:null,type:"complex"},{icon:"log₁₀",value:null,operation:null,type:"complex"},{icon:"x!",value:null,operation:"factorial",type:"complex"},{icon:"sin",value:null,operation:null,type:"complex"},{icon:"cos",value:null,operation:null,type:"complex"},{icon:"tan",value:null,operation:null,type:"complex"},{icon:"e",value:2.7183,operation:null,type:"complex"},{icon:"EE",value:null,operation:null,type:"complex"},{icon:"Rad",value:null,operation:null,type:"complex"},{icon:"sinh",value:null,operation:null,type:"complex"},{icon:"cosh",value:null,operation:null,type:"complex"},{icon:"tanh",value:null,operation:null,type:"complex"},{icon:"π",value:3.141592653589793,operation:null,type:"complex"},{icon:"Rand",value:null,operation:"random",type:"complex"},{icon:"AC",value:null,operation:"clear",type:"basic"},{icon:"+/-",value:null,operation:"negate",type:"basic"},{icon:"%",value:null,operation:"percent",type:"basic"},{icon:"÷",value:null,operation:"divide",type:"basic"},{icon:"7",value:"7",operation:null,type:"basic"},{icon:"8",value:"8",operation:null,type:"basic"},{icon:"9",value:"9",operation:null,type:"basic"},{icon:"×",value:null,operation:"multiply",type:"basic"},{icon:"4",value:"4",operation:null,type:"basic"},{icon:"5",value:"5",operation:null,type:"basic"},{icon:"6",value:"6",operation:null,type:"basic"},{icon:"-",value:null,operation:"subtract",type:"basic"},{icon:"1",value:"1",operation:null,type:"basic"},{icon:"2",value:"2",operation:null,type:"basic"},{icon:"3",value:"3",operation:null,type:"basic"},{icon:"+",value:null,operation:"add",type:"basic"},{icon:"0",value:"0",operation:null,type:"basic"},{icon:".",value:".",operation:null,type:"basic"},{icon:"=",value:null,operation:"equal",type:"basic"}].map((function(e){var t=e.icon,n=e.operation,o=e.type,r=e.value,u=document.createElement("button");switch(u.textContent=t,u.className="".concat(o,"-btn"),n||r||(u.className+=" disabled"),u.addEventListener("click",(function(){return function(e){var t=e.operation,n=e.value,o=e.icon;if(t)ee(t);else if(n||o){if(["e","π"].includes(o)&&($=!0,Z=n),"."===n&&$)return;if("."===n){if(!Z)return;$=!0}!function(e,t){Z||(Z=""),["e","π"].includes(t)?Z=e:Z+=e,H.textContent=Z}(n,o)}}({operation:n,value:r,icon:t})})),"0"===t&&(u.className+=" big"),o){case"complex":Q.appendChild(u);break;case"basic":n&&!["clear","negate","percent"].includes(n)?u.className+=" operation":n&&(u.className+=" upper"),K.appendChild(u)}return u}))})();